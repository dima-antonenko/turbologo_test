1. [Условия задачи](#условия-задачи)
2. [Требования к зависимостям](#требования-к-зависимостям)
3. [Импорт данных](#импорт-данных)
4. [Ответы на вопросы](#ответы-на-вопросы)

### 1. Условия задачи
Полное описание задачи находится [здесь](https://docs.google.com/document/d/1iIzOEUWuUT1WURPAlcRbThITsrznyMBbY7jP1Gv3AFU/edit)


### 2. Требования к зависимостям
Приложение было протестировано используя следующие версии зависимостей
- Ruby 3.2.2
- Rails 7.0.8
- Postgresql: 14


### 3. Импорт данных
Все скрипты по импорту данных находятся в папке `db/seeds/*`.
Для их запуска нужно выполнить команду `rake db:seed`

Данные преобразованы в следующую схему
![Schema](https://imgtr.ee/images/2023/09/25/0c86b12dad91112bac54e21e7e11919c.png "a title")

### 3. Ответы на вопросы

```
1.Загрузка и работа с данными. Где удобно хранить эти данные, как мы можем использовать использовать построенную вами модель на production коде в генераторе.
```
Для продакшена я бы хранил каждую таблицу в отдельной базе данных или же хранил данные в о кликах, продажах, лайках в коллекциях документа template


```
2.Какие у вас есть гипотезы о работе алгоритма. Какие данные могут быть значимы/не значимы.
```
Для начала я бы изучил взаимосвязь между лайками и продажами / количеством показов и продажами чтобы определить какой из показателей наиболее связан с продажами.
Также я бы добавил поле, показывающее коэффициент эффективности клика, по отношению к продажам, чтобы использовать это поле для более релевантной фильтрации.
Возможно, в будущем, есть смысл добавить кеширование популярных шаблонов на случай если 50% и больше поиска будет по популярным данным

```
3. Какие у вас есть инсайты по поводу предоставленных данных
```
Возможно я бы использовал материализованные представления для Postgresql

```
create materialized view mv_all as
select
  t.id,
  t.icon_required,
  t.slogn_required,
  cld.company_length_min,
  cld.company_length_max,
  ad.slogan_exists,
  ad.icon_selected,
  ad.industry_id
from
  templates t
    left join company_length_datas cld on
      cld.template_id = t.id
    left join advansed_dates ad on
      ad.template_id = t.id
;

refresh materialized view mv_all;

```


Выборка осуществляется так (условия могут быть разные):
```
select distinct
  id
from
  mv_all
where
  (
    industry_id = 5 or -- id индустрии 5
    industry_id is null -- или не указан
  )

```


```
4.Какие данные могли быть вам полезны дополнительно для работы алгоритма.
```


1. Статистика просмотров/продаж/кликов по индустриям.
2. Возможность использования одного шаблона для нескольких индустрий
3. Время просмотра страницы с шаблоном
4. Вектор интересов пользователя
5. Информация последующих покупок(какие шаблоны провоцируют на покупку других шаблонов)
6. Информация о индустриях провоцирующие покупки в смежных индустриях